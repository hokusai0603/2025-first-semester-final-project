# AI 金融交易系統 - 使用說明

## 主要更新

### ✅ 模型檔案管理
- **自動儲存位置**：模型檔案會自動儲存在與 `Final report.py` 相同的資料夾中
- **智能載入機制**：程式會自動檢查模型是否已存在

### 執行邏輯

```
開始執行
    ↓
檢查模型檔案是否存在？
    ↓
是 → 載入現有模型 → 直接進行評估與回測
    ↓
否 → 訓練新模型 → 儲存模型 → 評估與回測
    ↓
顯示結果
```

## 模型檔案命名規則

- 台積電 (2330.TW) → `model_2330.pkl`
- 鴻海 (2317.TW) → `model_2317.pkl`
- 長榮 (2603.TW) → `model_2603.pkl`

## 使用方式

### 第一次執行（訓練模型）
```python
python "Final report.py"
```
程式會：
1. 發現沒有模型檔案
2. 下載 2022-2024 的股價資料
3. 訓練三個股票的模型
4. 將模型儲存在同一資料夾
5. 執行回測並顯示結果

### 第二次執行（使用現有模型）
```python
python "Final report.py"
```
程式會：
1. 發現已有模型檔案
2. 直接載入模型
3. 使用最新資料進行評估
4. 執行回測並顯示結果

**優點**：節省訓練時間，可快速查看最新結果！

### 重新訓練模型
如果要重新訓練，只需刪除對應的 `.pkl` 檔案，程式會自動重新訓練。

## 每日推論功能

載入已訓練的模型，對最新股價進行預測：

```python
from Final_report import daily_inference

# 對台積電進行每日推論
daily_inference('2330.TW', 'model_2330.pkl')
```

輸出包括：
- 預測結果（看漲/看跌）
- 預測機率
- 關鍵技術指標（RSI、SMA乖離率等）

## 檔案結構

```
期末模組專題/
├── Final report.py          # 主程式
├── model_2330.pkl          # 台積電模型（執行後產生）
├── model_2317.pkl          # 鴻海模型（執行後產生）
├── model_2603.pkl          # 長榮模型（執行後產生）
└── README_使用說明.md       # 本說明檔案
```

## 注意事項

⚠️ 模型檔案包含：
- 訓練好的 RandomForest 分類器
- 特徵欄位定義
- 股票代碼資訊

⚠️ 首次執行需要網路連線以下載股價資料

⚠️ 訓練過程可能需要幾分鐘時間（每支股票約 1-2 分鐘）
